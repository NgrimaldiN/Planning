<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö R√©visions Partiels - Companion</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìö</text></svg>">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1>üìö R√©visions</h1>
                <span class="subtitle">Objectif: 19+ de moyenne</span>
            </div>
            <div class="header-right">
                <button id="start-focus-btn" class="header-start-btn">
                    <span class="start-icon">‚ñ∂</span>
                    <span>Start</span>
                </button>
                <div class="stats-mini">
                    <span id="hours-done">0</span>/<span id="hours-total">120</span>h
                </div>
                <div class="progress-ring">
                    <svg viewBox="0 0 36 36">
                        <path class="progress-ring-bg"
                            d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                        <path id="progress-ring-fill" class="progress-ring-fill" stroke-dasharray="0, 100"
                            d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                    </svg>
                    <span id="progress-percent">0%</span>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-view="today">Aujourd'hui</button>
            <button class="nav-tab" data-view="calendar">Calendrier</button>
            <button class="nav-tab" data-view="stats">Statistiques</button>
            <button class="nav-tab" data-view="revision">üìö R√©vision</button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Today View -->
            <section id="today-view" class="view active">
                <div class="day-header">
                    <button id="prev-day" class="day-nav">‚óÄ</button>
                    <div class="day-info">
                        <h2 id="current-day-name">Samedi 20 D√©cembre</h2>
                        <span id="current-day-hours" class="day-hours">8h pr√©vues</span>
                    </div>
                    <button id="next-day" class="day-nav">‚ñ∂</button>
                </div>

                <div id="blocks-container" class="blocks-container">
                    <!-- Blocks will be generated by JS -->
                </div>

                <!-- Live Focus Panel -->
                <div id="live-focus-panel" class="live-focus-panel hidden">
                    <div class="live-focus-header">
                        <div class="live-focus-status">
                            <span class="pulse-dot"></span>
                            <span>EN COURS</span>
                        </div>
                        <button id="stop-focus" class="stop-focus-btn">‚èπ Arr√™ter</button>
                    </div>
                    <div class="live-focus-content">
                        <div class="live-focus-subject" id="focus-subject">üîµ √âconom√©trie</div>
                        <div class="live-focus-time" id="focus-time">08:00 - 10:00</div>
                        <div class="live-focus-reminders">
                            <span class="reminder exam-reminder" id="focus-exam-days">J-24</span>
                            <span class="reminder block-reminder" id="focus-block-count">Bloc 1/15</span>
                        </div>
                        <div class="live-progress-container">
                            <div class="live-progress-bar" id="live-progress-bar"></div>
                            <span class="live-progress-time" id="live-progress-time">0:00 / 2:00:00</span>
                        </div>
                    </div>
                    <div class="live-focus-tasks" id="focus-tasks">
                        <!-- Tasks will be inserted here -->
                    </div>
                </div>
            </section>

            <!-- Calendar View -->
            <section id="calendar-view" class="view">
                <div class="calendar-grid" id="calendar-grid">
                    <!-- Calendar will be generated by JS -->
                </div>
            </section>

            <!-- Stats View -->
            <section id="stats-view" class="view">
                <!-- Subject Detail Panel (hidden by default) -->
                <div id="subject-detail" class="subject-detail hidden">
                    <button id="back-to-stats" class="back-btn">‚Üê Retour</button>
                    <div class="subject-detail-header">
                        <span id="detail-icon" class="detail-icon"></span>
                        <h2 id="detail-title"></h2>
                    </div>
                    <div id="subject-blocks" class="subject-blocks">
                        <!-- Blocks will be inserted here -->
                    </div>
                </div>

                <!-- Stats Grid -->
                <div id="stats-grid" class="stats-grid">
                    <div class="stat-card stats-blue" data-subject="econ">
                        <div class="stat-icon">üîµ</div>
                        <div class="stat-info">
                            <h3>√âconom√©trie</h3>
                            <div class="stat-progress">
                                <div class="stat-bar" id="bar-econ" style="width: 0%"></div>
                            </div>
                            <span id="hours-econ">0/30h</span>
                        </div>
                    </div>
                    <div class="stat-card stats-purple" data-subject="proc">
                        <div class="stat-icon">üü£</div>
                        <div class="stat-info">
                            <h3>Processus Stochastiques</h3>
                            <div class="stat-progress">
                                <div class="stat-bar" id="bar-proc" style="width: 0%"></div>
                            </div>
                            <span id="hours-proc">0/28h</span>
                        </div>
                    </div>
                    <div class="stat-card stats-green" data-subject="macro">
                        <div class="stat-icon">üü¢</div>
                        <div class="stat-info">
                            <h3>Macro√©conomie</h3>
                            <div class="stat-progress">
                                <div class="stat-bar" id="bar-macro" style="width: 0%"></div>
                            </div>
                            <span id="hours-macro">0/24h</span>
                        </div>
                    </div>
                    <div class="stat-card stats-yellow" data-subject="micro">
                        <div class="stat-icon">üü°</div>
                        <div class="stat-info">
                            <h3>Micro√©conomie</h3>
                            <div class="stat-progress">
                                <div class="stat-bar" id="bar-micro" style="width: 0%"></div>
                            </div>
                            <span id="hours-micro">0/22h</span>
                        </div>
                    </div>
                    <div class="stat-card stats-red" data-subject="stats">
                        <div class="stat-icon">üî¥</div>
                        <div class="stat-info">
                            <h3>Statistiques</h3>
                            <div class="stat-progress">
                                <div class="stat-bar" id="bar-stats" style="width: 0%"></div>
                            </div>
                            <span id="hours-stats">0/16h</span>
                        </div>
                    </div>
                </div>

                <div class="milestones">
                    <h3>üéØ Jalons</h3>
                    <div id="milestones-list" class="milestones-list">
                        <!-- Generated by JS -->
                    </div>
                </div>
            </section>

            <!-- Revision View -->
            <section id="revision-view" class="view">
                <!-- Content generated by revision-ui.js -->
            </section>
        </main>

        <!-- Catchup Modal -->
        <div id="catchup-modal" class="modal hidden">
            <div class="modal-content">
                <h3>üåô Mode Rattrapage</h3>
                <p>Tu as du retard aujourd'hui. Utiliser le cr√©neau 21h30-23h00 ?</p>
                <div class="modal-actions">
                    <button id="catchup-yes" class="btn primary">Oui, rattraper</button>
                    <button id="catchup-no" class="btn secondary">Non, reporter</button>
                </div>
            </div>
        </div>
    </div>

    <script src="planning-data.js"></script>
    <script src="supabase-sync.js"></script>
    <script src="revision-cards.js"></script>
    <script src="revision-ui.js"></script>
    <script src="app.js"></script>
</body>

</html>